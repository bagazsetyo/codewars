<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- bootstrap 3 cdn -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
  </head>
  <body>
    <div class="tab-content">
      <div id="tab-uangmuka" class="tab-pane">
        <div class="form-horizontal">
          <div class="form-group">
            <label class="col-md-3 control-label required" for="UangMuka_penanggung_jawab">Penanggung Jawab <span class="required">*</span></label>
            <div class="col-md-7">
              <select class="form-control eakSelect2 ui-autocomplete-input" name="UangMuka[penanggung_jawab]" id="UangMuka_penanggung_jawab" autocomplete="off" tabindex="-1" style="display: none">
                <option value=""></option>
                <option value="Fredy Hendrata, S.Sos.">Fredy Hendrata, S.Sos.</option>
                <option value="Murtiyastuti, S.E.">Murtiyastuti, S.E.</option>
                <option value="Sihar Roni Sirait, S.H.">Sihar Roni Sirait, S.H.</option>
                <option value="Gandhi Mantan Alam, S.H., M.H.">Gandhi Mantan Alam, S.H., M.H.</option>
                <option value="Azwar Nugroho Al Amin, S.E., M.Ak.">Azwar Nugroho Al Amin, S.E., M.Ak.</option>
                <option value="Topan Sopuan, S.Sos., S.H., M.H.">Topan Sopuan, S.Sos., S.H., M.H.</option>
                <option value="Bayu Sukma Purwanto, S.H.">Bayu Sukma Purwanto, S.H.</option>
                <option value="Ajun Roni Prasetyo, S.H., M.H.">Ajun Roni Prasetyo, S.H., M.H.</option>
                <option value="Dwi Hardjanti, S.H., M.H.">Dwi Hardjanti, S.H., M.H.</option>
                <option value="Titik Susiawati, S.H., M.H.">Titik Susiawati, S.H., M.H.</option>
                <option value="Novi Indiastuti, S.H., M.H.">Novi Indiastuti, S.H., M.H.</option>
                <option value="Fajar Ari Saputra, S.H.">Fajar Ari Saputra, S.H.</option>
                <option value="Dhani Ershiano, S.H., M.H.">Dhani Ershiano, S.H., M.H.</option>
                <option value="Adhi Kuntjoro Sutarmanto, S.E., M.M.">Adhi Kuntjoro Sutarmanto, S.E., M.M.</option>
                <option value="Sastyo Aji Darmawan, S.H., M.E.">Sastyo Aji Darmawan, S.H., M.E.</option>
                <option value="Andri Irwan, S.H., M.H.">Andri Irwan, S.H., M.H.</option>
                <option value="Marsinta S.T Simanjuntak S.E., M.M.">Marsinta S.T Simanjuntak S.E., M.M.</option>
                <option value="Dora Hanura, S.E., M.M., M.H.">Dora Hanura, S.E., M.M., M.H.</option>
                <option value="Ricky Ardi, A.Md.">Ricky Ardi, A.Md.</option>
                <option value="Horizon Anindhita Pranowo, S.H.">Horizon Anindhita Pranowo, S.H.</option></select
              ><span class="select2 select2-container select2-container--default" dir="ltr" style="width: 100%; z-index: 1"
                ><span class="selection"
                  ><span class="select2-selection select2-selection--single" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-labelledby="select2-UangMuka_penanggung_jawab-container"
                    ><span class="select2-selection__rendered" id="select2-UangMuka_penanggung_jawab-container" title=""></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span
                ><span class="dropdown-wrapper" aria-hidden="true"></span></span
              ><span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
            </div>
          </div>

          <div class="form-group">
            <label class="col-md-3 control-label required" for="UangMuka_pejabat_pembuat">PPK <span class="required">*</span></label>
            <div class="col-md-7">
              <select class="form-control eakSelect2" name="UangMuka[pejabat_pembuat]" id="UangMuka_pejabat_pembuat" tabindex="-1" style="display: none">
                <option value=""></option>
                <option value="Sastyo Aji Darmawan, S.H., M.E.">Sastyo Aji Darmawan, S.H., M.E.</option>
                <option value="Andri Irwan, S.H., M.H.">Andri Irwan, S.H., M.H.</option>
                <option value="Arren Operator Sekretariat">Arren Operator Sekretariat</option></select
              ><span class="select2 select2-container select2-container--default" dir="ltr" style="width: 100%; z-index: 1"
                ><span class="selection"
                  ><span class="select2-selection select2-selection--single" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-labelledby="select2-UangMuka_pejabat_pembuat-container"
                    ><span class="select2-selection__rendered" id="select2-UangMuka_pejabat_pembuat-container" title=""></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span
                ><span class="dropdown-wrapper" aria-hidden="true"></span
              ></span>
            </div>
          </div>

          <div class="form-group">
            <label class="col-md-3 control-label required" for="UangMuka_npwp">NPWP <span class="required">*</span></label>
            <div class="col-md-7">
              <input class="form-control" required="required" name="UangMuka[npwp]" id="UangMuka_npwp" type="text" value="002406262011000" />
            </div>
          </div>

          <div class="form-group">
            <label class="col-md-3 control-label" for="UangMuka_uraian">Uraian</label>
            <div class="col-md-7">
              <textarea class="form-control" rows="3" name="UangMuka[uraian]" id="UangMuka_uraian"></textarea>
            </div>
          </div>

          <div class="form-group">
            <label class="col-md-3 control-label required" for="UangMuka_tempat_kegiatan">Tempat Kegiatan <span class="required">*</span></label>
            <div class="col-md-7">
              <input class="form-control" required="required" name="UangMuka[tempat_kegiatan]" id="UangMuka_tempat_kegiatan" type="text" maxlength="255" />
            </div>
          </div>

          <div class="form-group">
            <label class="col-md-3 control-label" for="nota_belanja">Nota Dinas</label>
            <div class="col-md-7">
              <div class="form-control">
                <div class="MultiFile-wrap" id="UangMuka_nota_belanja">
                  <input id="UangMuka_nota_belanja" type="file" value="" name="UangMuka[nota_belanja][]" class="MultiFile-applied" multiple="" />
                  <div class="MultiFile-list" id="UangMuka_nota_belanja_list"></div>
                </div>
              </div>
              <p>*File harus berupa peg,jpg,gif,png maksimal 500KB</p>
            </div>
          </div>

          <div class="form-group">
            <label class="col-md-3 control-label required" for="UangMuka_uangmuka_diajukan">Uangmuka Diajukan <span class="required">*</span></label>
            <div class="col-md-7 totalUangMuka">
              <input readonly="readonly" class="form-control formatted" name="UangMuka[uangmuka_diajukan]" id="UangMuka_uangmuka_diajukan" type="text" />
            </div>
          </div>
        </div>
      </div>

      <div id="tab-danom" class="tab-pane active">
        <div id="form-danom" class="table-responsive">
          <table class="table table-bordered table-striped" id="tbdanom">
            <thead>
              <tr>
                <th>No.</th>
                <th>RENKAS</th>
                <th>NAMA</th>
                <th>JABATAN</th>
                <th>KATEGORI</th>
                <th>GOL</th>
                <th>NOMOR NPWP</th>
                <th>NOMINAL KOTOR</th>
                <th>JUMLAH BULAN</th>
                <th>JUMLAH KOTOR</th>
                <th>NILAI PPH</th>
                <th>JUMLAH BERSIH</th>
                <th><button type="button" name="add" class="btn btn-info btn-sm addrow-danom noborder-radius" id="addrow-danom">+</button></th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td class="numbering text-center">1</td>
                <td><select class="form-control input-sm renkas_detail_id" name="Danom[renkas_detail_id][]" id="Danom_renkas_detail_id" style="width: 150px"></select></td>
                <td>
                  <input type="text" name="Danom[nama][]" placeholder="nama" class="form-control input-sm nama-anggota-danom ui-autocomplete-input" autocomplete="off" /><span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span><span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                  <input type="hidden" name="Danom[nip][]" class="nip form-control input-sm" value="" />
                  <input type="hidden" name="Danom[blocked][]" class="blocked" value="" />
                  <input type="hidden" name="Danom[counting][]" class="counting" value="" />
                </td>
                <td><input type="text" name="Danom[jabatan][]" placeholder="Jabatan" class="form-control input-sm triggerChanged jabatan" value="" /></td>
                <td>
                  <select class="form-control input-sm triggerChanged kategori" style="width: 60px" name="Danom[kategori][]" id="Danom_kategori">
                    <option value="1" selected="selected">PNS</option>
                    <option value="2">OUTSOURCING</option>
                    <option value="3">NON PNS</option>
                  </select>
                </td>
                <td>
                  <select class="form-control input-sm triggerChanged golongan" style="width: 60px" name="Danom[golongan][]" id="Danom_golongan">
                    <option value="IV" selected="selected">IV</option>
                    <option value="III">III</option>
                    <option value="II">II</option>
                    <option value="I">I</option>
                  </select>
                </td>
                <td><input type="text" name="Danom[npwp][]" placeholder="NPWP" class="form-control input-sm npwp triggerChanged" value="" /></td>
                <td><input type="text" name="Danom[nominal_kotor][]" placeholder="Nominal Kotor" class="formatted form-control input-sm triggerChanged nominal_kotor" value="" /></td>
                <td><input type="number" name="Danom[jumlah_bulan][]" placeholder="Jumlah Bulan" class="form-control input-sm triggerChanged jumlah_bulan" value="1" min="0" /></td>
                <td><input type="text" name="Danom[jumlah_kotor][]" placeholder="Jumlah Kotor" class="formatted form-control input-sm jumlah_kotor" value="" readonly="readonly" /></td>
                <td><input type="text" name="Danom[pph][]" placeholder="Nilai PPh" class="formatted form-control input-sm pph triggerChanged" value="" /></td>
                <td><input type="text" name="Danom[jumlah_terima][]" placeholder="Jumlah Bersih" class="formatted form-control input-sm jumlah_terima" value="" readonly="readonly" /></td>
                <td><button type="button" name="rmv" class="btn btn-danger btn-sm delrow-danom noborder-radius">x</button></td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td colspan="7"></td>
                <td>
                  <input id="grand_total_kotor" class="form-control input-sm formatted required grand_total_kotor" placeholder="Total Kotor" readonly="readonly" name="UangMuka[uang_total_peserta]" type="text" />
                </td>
                <td><input type="text" name="grand_total_pajak" id="grand_total_pajak" placeholder="Total Pajak" class="formatted form-control input-sm" value="" readonly="readonly" /></td>
                <td><input type="text" name="grand_total_terima" id="grand_total_terima" placeholder="Total Terima" class="formatted form-control input-sm" value="" readonly="readonly" /></td>
                <td><button type="button" name="add" class="btn btn-info btn-sm addrow-danom noborder-radius">+</button></td>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>
    </div>

    <!-- jquery cdn  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- bootstrap 3 js cdn -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script>

      // button with name add clone first row table
      $(".delrow-danom").on("click", function () {
        var tr = $(".tr-danom").remove();
      });

      var array = [
            {
                "nama": "DR. Freddy Harris, S.H., LL.M., ACCS.",
                "jabatan": "ti",
                "golongan": "IV",
                "kategori": "1",
                "npwp": "488095993015000",
                "nip": "196611181994031001",
                "blocked": "1"
            },
            {
                "nama": "DR. Freddy Harris, S.H., LL.M., ACCS.",
                "jabatan": "ti",
                "golongan": "IV",
                "kategori": "1",
                "npwp": "488095993015000",
                "nip": "196611181994031001",
                "blocked": "1"
            },
            {
                "nama": "DR. Freddy Harris, S.H., LL.M., ACCS.",
                "jabatan": "ti",
                "golongan": "II",
                "kategori": "1",
                "npwp": "488095993015000",
                "nip": "196611181994031001",
                "blocked": "1"
            }
        ];

        
        // $(document).ready(function () {
        //     array.forEach((value) => {
        //       console.log(value);
        //         $('.addrow-danom').click();

        //         var tbody = $("#tbdanom tbody");
        //         var countTr = $('#tbdanom tbody tr').length - 1;
                
        //         var tr = tbody.find("tr").eq(countTr);
        //         tr.addClass("tr-danom");
        //         var inputName = tr.find('input[name="Danom[nama][]"]').val(value.nama);

        //         var inputNip = tr.find('input[name="Danom[nip][]"]').val(value.nip);

        //         // find select on this tr by name Danom[kategori][]
        //         var selectKategori = tr.find('select[name="Danom[kategori][]"]');
        //         // select value 2
        //         selectKategori.val(value.kategori);
        //         // find select on this tr by name Danom[golongan][]
        //         var selectGolongan = tr.find('select[name="Danom[golongan][]"]');
        //         // select value 2
        //         selectGolongan.val(value.golongan);
        //         // find input on this tr by name Danom[npwp][]
        //         var inputNpwp = tr.find('input[name="Danom[npwp][]"]').val(value.npwp);
        //         //  find input on this tr by name Danom[jabatan][]
        //         var inputJabatan = tr.find('input[name="Danom[jabatan][]"]').val(value.jabatan);
        //     });
        // });



      $("#addrow-danom").on("click", function () {

        var tbody = $(this).closest("table").find("tbody");
        // find first tr
        var firstTr = tbody.find("tr:first");
        // clone first tr
        var cloneTr = firstTr.clone();
        // append clone tr to tbody
        tbody.append(cloneTr);


        
        $('.renkas_detail_id').on('change', function(){
            alert(this.value);
        })
        var countTr = $('#tbdanom tbody tr').length - 1;
        var select = tbody.find("tr").eq(countTr).find("select.renkas_detail_id").trigger("change");
        // $('.renkas_detail_id').trigger('change');

      //   // count all tr in tbody
      //   var countTr = tbody.find("tr").length - 1;

      //   // add class on tr clone
      //   cloneTr.addClass("tr-danom");

      //   // find tr equal by countTr
      //   var tr = tbody.find("tr").eq(countTr);
      //   var inputName = tr.find('input[name="Danom[nama][]"]').val("dr");

      //   // filter ul autocomplete with id ui-id-2 and filter by input name with preg_mathc
      //   var ul = $("#ui-id-2")
      //     .find("li")
      //     .filter(function () {
      //       console.log($(this).text().match(inputName) ? 1 : 0);
      //       //   return $(this).text().match(inputName);
      //     });

      //   console.log(ul);

      //   var inputNip = tr.find('input[name="Danom[nip][]"]').val("123");

      //   // find select on this tr by name Danom[kategori][]
      //   var selectKategori = tr.find('select[name="Danom[kategori][]"]');
      //   // select value 2
      //   selectKategori.val("2");
      //   // find select on this tr by name Danom[golongan][]
      //   var selectGolongan = tr.find('select[name="Danom[golongan][]"]');
      //   // select value 2
      //   selectGolongan.val("II");
      //   // find input on this tr by name Danom[npwp][]
      //   var inputNpwp = tr.find('input[name="Danom[npwp][]"]').val("123");
      //   //  find input on this tr by name Danom[jabatan][]
      //   var inputJabatan = tr.find('input[name="Danom[jabatan][]"]').val("bagas");
      });
    </script>
  </body>
</html>
