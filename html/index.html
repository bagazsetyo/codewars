<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- cdn bootstrap 4 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body>
    <div id="tabPeserta" class="tab-pane active">
        <div class="table-responsive" style="overflow-x: scroll;">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <td class="urutan"></td><input type="hidden" value="198702182010122007"
                            name="Peserta[0][nip]"><input type="hidden" value="198702182010122007"
                            name="Type[0][nip]"><input type="hidden" value="Hajar Hastuti Ali, S.H."
                            name="Peserta[0][nama]">
                        <td class="nama"></td>
                        <td class="golongan"></td>
                        <td><input type="text" value="1" class="jumlah_hari form-control input-sm jumlah_total"
                                name="Peserta[0][rincian][jumlah][jumlah_hari]" size="12" readonly="true"></td>
                        <td style="min-width:150px"><input type="text" value="1.000,00"
                                class="tiket formatted form-control input-sm" name="Peserta[0][rincian][tiket]" size="12">
                        </td>
                        <td style="min-width:150px"></td>
                        <td style="min-width:150px"><input type="text" value="1.000,00"
                                class="uang_representasi formatted form-control input-sm"
                                name="Peserta[0][rincian][uang_representasi]" size="12"></td>
                        <td style="min-width:150px"></td>
                        <td style="min-width:150px"><input type="text" value="1.000,00"
                                class="hotel formatted form-control input-sm" name="Peserta[0][rincian][hotel]" size="12">
                        </td>
                        <td style="min-width:150px"></td>
                        <td style="min-width:150px"><input type="text" value="1.000,00"
                                class="uang_harian formatted form-control input-sm" name="Peserta[0][rincian][uang_harian]"
                                size="12"></td>
                        <td style="min-width:150px"></td>
                        <td style="min-width:150px"><input type="text" value="1.000,00"
                                class="taksi formatted form-control input-sm" name="Peserta[0][rincian][taksi]" size="12">
                        </td>
                        <td style="min-width:150px"></td>
                        <td style="min-width:150px"><input type="text" value="1.000,00"
                                class="jumlah formatted form-control input-sm" name="jumlah[jumlah]" size="12"
                                readonly="true" style="display: none;"></td>
                    </tr>
                    <tr>
                        <td>No</td>
                        <td>Nama</td>
                        <td>Gol</td>
                        <td>Jumlah Hari</td>
                        <td style="white-space:nowrap">Tiket </td>
                        <td style="white-space:nowrap"> Keterangan </td>
                        <td style="white-space:nowrap">Total Uang Representasi </td>
                        <td style="white-space:nowrap"> Keterangan </td>
                        <td style="white-space:nowrap">Total Hotel </td>
                        <td style="white-space:nowrap"> Keterangan </td>
                        <td style="white-space:nowrap">Total Uang Harian </td>
                        <td style="white-space:nowrap"> Keterangan </td>
                        <td style="white-space:nowrap">Taksi </td>
                        <td style="white-space:nowrap"> Keterangan </td>
                        <td style="white-space:nowrap">Jumlah </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="urutan">1</td><input type="hidden" value="198702182010122007"
                            name="Peserta[0][nip]"><input type="hidden" value="198702182010122007"
                            name="Type[0][nip]"><input type="hidden" value="Hajar Hastuti Ali, S.H."
                            name="Peserta[0][nama]">
                        <td class="nama">Hajar Hastuti Ali, S.H.</td>
                        <td class="golongan">III/c</td>
                        <td><input type="text" value="1" class="jumlah_hari form-control input-sm jumlah_total"
                                name="Peserta[0][rincian][jumlah][jumlah_hari]" size="12" readonly="true"></td>
                        <td style="min-width:150px"><input type="text" value="1.000,00"
                                class="tiket formatted form-control input-sm" name="Peserta[0][rincian][tiket]" size="12">
                        </td>
                        <td style="min-width:150px"><select name="Type[0][keterangan][tiket]"
                                class="form-control keterangan-renkas" value="0">
                                <option data-max="0" value="0">Pilihhahahaha</option>
                                <option data-max="50000" value="52377">Moderator [2 ORG x 5 KGT]</option>
                                <option data-max="20000" value="37908">Dana Cadangan</option>
                            </select></td>
                        <td style="min-width:150px"><input type="text" value="1.000,00"
                                class="uang_representasi formatted form-control input-sm"
                                name="Peserta[0][rincian][uang_representasi]" size="12"></td>
                        <td style="min-width:150px"><select name="Type[0][keterangan][uang_representasi]"
                                class="form-control keterangan-renkas" value="0">
                                <option data-max="0" value="0">Pilihhahahaha</option>
                                <option data-max="50000" value="52377">Moderator [2 ORG x 5 KGT]</option>
                                <option data-max="20000" value="37908">Dana Cadangan</option>
                            </select></td>
                        <td style="min-width:150px"><input type="text" value="1.000,00"
                                class="hotel formatted form-control input-sm" name="Peserta[0][rincian][hotel]" size="12">
                        </td>
                        <td style="min-width:150px"><select name="Type[0][keterangan][hotel]"
                                class="form-control keterangan-renkas" value="0">
                                <option data-max="0" value="0">Pilihhahahaha</option>
                                <option data-max="50000" value="52377">Moderator [2 ORG x 5 KGT]</option>
                                <option data-max="20000" value="37908">Dana Cadangan</option>
                            </select></td>
                        <td style="min-width:150px"><input type="text" value="1.000,00"
                                class="uang_harian formatted form-control input-sm" name="Peserta[0][rincian][uang_harian]"
                                size="12"></td>
                        <td style="min-width:150px"><select name="Type[0][keterangan][uang_harian]"
                                class="form-control keterangan-renkas" value="0">
                                <option data-max="0" value="0">Pilihhahahaha</option>
                                <option data-max="50000" value="52377">Moderator [2 ORG x 5 KGT]</option>
                                <option data-max="20000" value="37908">Dana Cadangan</option>
                            </select></td>
                        <td style="min-width:150px"><input type="text" value="1.000,00"
                                class="taksi formatted form-control input-sm" name="Peserta[0][rincian][taksi]" size="12">
                        </td>
                        <td style="min-width:150px"><select name="Type[0][keterangan][taksi]"
                                class="form-control keterangan-renkas" value="0">
                                <option data-max="0" value="0">Pilihhahahaha</option>
                                <option data-max="50000" value="52377">Moderator [2 ORG x 5 KGT]</option>
                                <option data-max="20000" value="37908">Dana Cadangan</option>
                            </select></td>
                        <td style="min-width:150px"><input type="text" value="1.000,00"
                                class="jumlah formatted form-control input-sm" name="jumlah[jumlah]" size="12"
                                readonly="true"></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><strong>JUMLAH</strong></td>
                        <td></td>
                        <td></td>
                        <td><input type="text" id="total_tiket" value="0"
                                class="total_tiket formatted form-control input-sm" name="total_tiket[]" size="12"></td>
                        <td></td>
                        <td><input type="text" id="total_uang_representasi" value="0"
                                class="total_uang_representasi formatted form-control input-sm"
                                name="total_uang_representasi[]" size="12"></td>
                        <td></td>
                        <td><input type="text" id="total_hotel" value="0"
                                class="total_hotel formatted form-control input-sm" name="total_hotel[]" size="12"></td>
                        <td></td>
                        <td><input type="text" id="total_uang_harian" value="0"
                                class="total_uang_harian formatted form-control input-sm" name="total_uang_harian[]"
                                size="12"></td>
                        <td></td>
                        <td><input type="text" id="total_taksi" value="0"
                                class="total_taksi formatted form-control input-sm" name="total_taksi[]" size="12"></td>
                        <td></td>
                        <td><input type="text" id="total_jumlah" value="0"
                                class="total_jumlah formatted form-control input-sm" name="total_jumlah[]" size="12"></td>
                    </tr>
                </tbody>
                <tfoot></tfoot>
            </table>
        </div>
        <a class="btn btn-info pull-right nexttab noborder-radius" id="selanjutnya" aria-expanded="true">Selanjutnya</a>
        <div class="clearfix"></div>
    </div>
    <table id="renkasSelected" class="table admin-form theme-warning" style="display: table; margin-top: 200px;">
        <thead>
            <tr class="bg-light">
                <th>Kode Output</th>
                <th>Sub Output</th>
                <th>Komponen</th>
                <th>Sub Komponen</th>
                <th>Akun</th>
                <th>Detail</th>
                <th>Nominal</th>
                <th>Kode Beban</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    006 </td>
                <td>
                    001 </td>
                <td>
                    052 </td>
                <td>
                    C </td>
                <td>
                    521213<input type="hidden" name="UangMuka[renkas][id][]" value="52377"><input class="nominal"
                        type="hidden" name="UangMuka[renkas][nominal][]" value="50000"> </td>
                <td>
                    Moderator [2 ORG x 5 KGT] </td>
                <td>
                    50000</td>
                <td>
                    C </td>
                <td>
                    <a class="btn btn-danger btn-xs deleteRow deleteOption noborder-radius" id="deleteOption">
                        <span class="fa fa-trash-o"></span>
                    </a>
                </td>
            </tr>
            <tr>
                <td>
                    999 </td>
                <td>
                    999 </td>
                <td>
                    999 </td>
                <td>
                    A </td>
                <td>
                    521119<input type="hidden" name="UangMuka[renkas][id][]" value="37908"><input class="nominal"
                        type="hidden" name="UangMuka[renkas][nominal][]" value="20000"> </td>
                <td>
                    Dana Cadangan </td>
                <td>
                    20000</td>
                <td>
                    A </td>
                <td>
                    <a class="btn btn-danger btn-xs deleteRow deleteOption noborder-radius" id="deleteOption">
                        <span class="fa fa-trash-o"></span>
                    </a>
                </td>
            </tr>
            <tr>
                <td>005</td>
                <td>001</td>
                <td>051</td>
                <td>A</td>
                <td>521211</td>
                <td><input type="hidden" name="UangMuka[renkas][id][]" value="5483"><input type="hidden"
                        name="UangMuka[renkas][nominal][]" value="10000" class="nominal">Penggandaan Bahan [20 ORG x 50 LBR
                    x 20 KGT]</td>
                <td>10.000</td>
                <td>D</td>
                <td class="text-center">
                    <a class="btn btn-danger btn-xs deleteRow deleteOption" id="deleteOption">
                        <span class="fa fa-trash-o"></span>
                    </a>
                </td>
            </tr>
            <tr class="total_nominal" style="display:none;">
                <td colspan="5"></td>
                <td><b>Total Nominal</b></td>
                <td id="total">80000</td>
                <td colspan="2"></td>
            </tr>
        </tbody>
    </table>
    <!-- jquery 3 cdn -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <!-- bootstrap 4 js cdn -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <script>

        $('#selanjutnya').click(function(el){
            var clicked = true;
            $('#tabPeserta').find('tbody tr').each(function (index, el) {
                // find select all select 
                $(el).find('select').each(function(indexSelect, elementSelect){
                    // get name select 
                    var nameSelect = $(elementSelect).attr('name');
                    var nameInput = nameSelect.replace('Type', 'Peserta').replace('[keterangan]', '[rincian]');
                    // get value select
                    var valueSelect = $(elementSelect).val();
                    // get max value
                    var maxValue = $(elementSelect).find('option:selected').data('max');
                    // get input
                    var input = $(el).find('input[name="'+nameInput+'"]');
                    // get value input
                    var valueInput = $(input).val().replace(/\./g, '');
                    // check max value < valueInput
                    if(maxValue < parseInt(valueInput)){
                        // set value input = max value
                        $(input).val(maxValue.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "."));
                        // alert
                        alert('Maaf, jumlah yang anda masukkan melebihi batas maksimal');
                        // set clicked = false
                        clicked = false;
                        return false;
                    }
                    console.log(indexSelect);
                });
            });
            if(clicked){
                
            }
        });


        $('.deleteOption').click(function(el){
            var idKategori = $(this).parent().parent().find('input[type="hidden"]').val();
            $('#tabPeserta').find('tbody tr').each(function (index, el) {
                // find select all select 
                $(el).find('select').each(function (indexSelect, elementSelect) {
                    // remove option where value == idKategori
                    $(elementSelect).find('option[value="'+idKategori+'"]').remove();
                })
            });
            $(this).parent().parent().remove();
        });

    </script>
</body>
</html>